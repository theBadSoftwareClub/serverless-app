version: '3.3'

services:
  development:
    build: ./Client
    expose:
      - 3000
    environment:
      CHOKIDAR_USEPOLLING: 'true'
      REACT_APP_API_URL: 'https://exampleapi.thebadsoftwareclub.net'
    ports:
      - 80:3000
    volumes:
      - ./Client/src:/usr/src/app/src
    command: npm run start
    stdin_open: true
    tty: true
  production:
    build: ./Client
    depends_on:
      - development
    environment:
      REACT_APP_API_URL: 'https://exampleapi.thebadsoftwareclub.net'
    volumes:
      - ./Client/src:/usr/src/app/src
      - ./Client/build:/usr/src/app/build
    command: npm run build